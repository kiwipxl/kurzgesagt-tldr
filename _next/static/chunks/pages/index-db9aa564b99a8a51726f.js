_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[13],{ODXe:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}(e,t)||function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,"a",(function(){return i}))},RXBc:function(e,t,n){"use strict";n.r(t),n.d(t,"__N_SSG",(function(){return de}));var r=n("nKUr"),i=n("q1tI"),a=n.n(i),o=n("nOHt"),s=n("ODXe"),c=n("wx14"),u=n("zLVn"),l=n("TSYQ"),d=n.n(l),f=n("vUet"),m=a.a.forwardRef((function(e,t){var n=e.bsPrefix,r=e.variant,i=e.animation,o=e.size,s=e.children,l=e.as,m=void 0===l?"div":l,p=e.className,h=Object(u.a)(e,["bsPrefix","variant","animation","size","children","as","className"]),v=(n=Object(f.a)(n,"spinner"))+"-"+i;return a.a.createElement(m,Object(c.a)({ref:t},h,{className:d()(p,v,o&&v+"-"+o,r&&"text-"+r)}),s)}));m.displayName="Spinner";var p=m,h=n("6xyR"),v=n("ExVU");function b(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x=function(e){var t,n=a.a.useState(0),i=Object(s.a)(n,2),o=i[0],c=i[1],u=a.a.useRef(null);t=e.numViews>=1e6?(Math.round(e.numViews/1e6*10)/10).toString()+"M":e.numViews>=1e5?Math.round(e.numViews/1e3).toString()+"K":e.numViews>=1e3?(Math.round(e.numViews/1e3*10)/10).toString()+"K":e.numViews.toString();var l,d=v.DateTime.fromISO(e.publishedAt).toRelative(),f="",m=!1,p=b(v.Duration.fromISO(e.duration).toFormat("hh:mm:ss"));try{for(p.s();!(l=p.n()).done;){var E=l.value;"0"!=E&&":"!=E&&(m=!0),m&&(f+=E)}}catch(j){p.e(j)}finally{p.f()}a.a.useEffect((function(){new ResizeObserver((function(e){c(e[0].target.clientHeight)})).observe(u.current)}),[]);var x=100;return o>0&&(x=o-30),Object(r.jsxs)(h.a,{className:"video-card",onClick:function(){e.onClick&&e.onClick(e.id)},children:[Object(r.jsx)(h.a.Img,{ref:u,className:"video-card-img",variant:"top",src:e.thumbnail}),Object(r.jsx)("div",{className:"video-card-duration",style:{top:x},children:f}),Object(r.jsxs)(h.a.Body,{children:[Object(r.jsx)(h.a.Title,{className:"video-card-title",children:e.title}),Object(r.jsx)(h.a.Text,{className:"video-card-info",children:"".concat(t," views | ").concat(d)})]})]})},j=n("JCAc"),O=n("ZCiN");function g(e){var t=function(e){return e&&e.ownerDocument||document}(e);return t&&t.defaultView||window}var y=/([A-Z])/g;var w=/^ms-/;function N(e){return function(e){return e.replace(y,"-$1").toLowerCase()}(e).replace(w,"-ms-")}var S=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;var C=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(N(t))||function(e,t){return g(e).getComputedStyle(e,t)}(e).getPropertyValue(N(t));Object.keys(t).forEach((function(i){var a=t[i];a||0===a?!function(e){return!(!e||!S.test(e))}(i)?n+=N(i)+": "+a+";":r+=i+"("+a+") ":e.style.removeProperty(N(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n},k=!("undefined"===typeof window||!window.document||!window.document.createElement),T=!1,R=!1;try{var L={get passive(){return T=!0},get once(){return R=T=!0}};k&&(window.addEventListener("test",L,L),window.removeEventListener("test",L,!0))}catch(fe){}var _=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!R){var i=r.once,a=r.capture,o=n;!R&&i&&(o=n.__once||function e(r){this.removeEventListener(t,e,a),n.call(this,r)},n.__once=o),e.addEventListener(t,o,T?r:a)}e.addEventListener(t,n,r)};var A=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};var D=function(e,t,n,r){return _(e,t,n,r),function(){A(e,t,n,r)}};function V(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e){var t=document.createEvent("HTMLEvents");t.initEvent("transitionend",!0,!0),e.dispatchEvent(t)}(e)}),t+n),a=D(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),a()}}function P(e,t,n,r){null==n&&(n=function(e){var t=C(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=V(e,n,r),a=D(e,"transitionend",t);return function(){i(),a()}}var I=n("dI71"),M=n("17x9"),U=n.n(M),X=n("i8i4"),H=n.n(X),z=!1,Y=a.a.createContext(null),B=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i="exited",r.appearStatus="entering"):i="entered":i=t.unmountOnExit||t.mountOnEnter?"unmounted":"exited",r.state={status:i},r.nextCallback=null,r}Object(I.a)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&"unmounted"===t.status?{status:"exited"}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?"entering"!==n&&"entered"!==n&&(t="entering"):"entering"!==n&&"entered"!==n||(t="exiting")}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),"entering"===t?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&"exited"===this.state.status&&this.setState({status:"unmounted"})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[H.a.findDOMNode(this),r],a=i[0],o=i[1],s=this.getTimeouts(),c=r?s.appear:s.enter;!e&&!n||z?this.safeSetState({status:"entered"},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,o),this.safeSetState({status:"entering"},(function(){t.props.onEntering(a,o),t.onTransitionEnd(c,(function(){t.safeSetState({status:"entered"},(function(){t.props.onEntered(a,o)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:H.a.findDOMNode(this);t&&!z?(this.props.onExit(r),this.safeSetState({status:"exiting"},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:"exited"},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:"exited"},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:H.a.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=i[0],o=i[1];this.props.addEndListener(a,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if("unmounted"===e)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Object(u.a)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return a.a.createElement(Y.Provider,{value:null},"function"===typeof n?n(e,r):a.a.cloneElement(a.a.Children.only(n),r))},t}(a.a.Component);function F(){}B.contextType=Y,B.propTypes={},B.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:F,onEntering:F,onEntered:F,onExit:F,onExiting:F,onExited:F},B.UNMOUNTED="unmounted",B.EXITED="exited",B.ENTERING="entering",B.ENTERED="entered",B.EXITING="exiting";var Z,$=B;var G=((Z={}).entering="show",Z.entered="show",Z),J=a.a.forwardRef((function(e,t){var n=e.className,r=e.children,o=Object(u.a)(e,["className","children"]),s=Object(i.useCallback)((function(e){!function(e){e.offsetHeight}(e),o.onEnter&&o.onEnter(e)}),[o]);return a.a.createElement($,Object(c.a)({ref:t,addEndListener:P},o,{onEnter:s}),(function(e,t){return a.a.cloneElement(r,Object(c.a)({},t,{className:d()("fade",n,r.props.className,G[e])}))}))}));J.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},J.displayName="Fade";var K=J,q={label:U.a.string.isRequired,onClick:U.a.func},Q=a.a.forwardRef((function(e,t){var n=e.label,r=e.onClick,i=e.className,o=Object(u.a)(e,["label","onClick","className"]);return a.a.createElement("button",Object(c.a)({ref:t,type:"button",className:d()("close",i),onClick:r},o),a.a.createElement("span",{"aria-hidden":"true"},"\xd7"),a.a.createElement("span",{className:"sr-only"},n))}));Q.displayName="CloseButton",Q.propTypes=q,Q.defaultProps={label:"Close"};var W=Q,ee=n("U1MP"),te=n("YdCC"),ne=n("dbZe"),re=Object(ee.a)("h4");re.displayName="DivStyledAsH4";var ie=Object(te.a)("alert-heading",{Component:re}),ae=Object(te.a)("alert-link",{Component:ne.a}),oe={show:!0,transition:K,closeLabel:"Close alert"},se=a.a.forwardRef((function(e,t){var n=Object(j.a)(e,{show:"onClose"}),r=n.bsPrefix,i=n.show,o=n.closeLabel,s=n.className,l=n.children,m=n.variant,p=n.onClose,h=n.dismissible,v=n.transition,b=Object(u.a)(n,["bsPrefix","show","closeLabel","className","children","variant","onClose","dismissible","transition"]),E=Object(f.a)(r,"alert"),x=Object(O.a)((function(e){p&&p(!1,e)})),g=!0===v?K:v,y=a.a.createElement("div",Object(c.a)({role:"alert"},g?b:void 0,{ref:t,className:d()(s,E,m&&E+"-"+m,h&&E+"-dismissible")}),h&&a.a.createElement(W,{onClick:x,label:o}),l);return g?a.a.createElement(g,Object(c.a)({unmountOnExit:!0},b,{ref:void 0,in:i}),y):i?y:null}));se.displayName="Alert",se.defaultProps=oe,se.Link=ae,se.Heading=ie;var ce=se,ue=function(e){var t=a.a.useState(!1),n=Object(s.a)(t,2),i=n[0],o=n[1];return Object(r.jsxs)(ce,{variant:"danger",className:e.className,children:[e.title&&Object(r.jsx)(ce.Heading,{children:e.title}),e.message&&Object(r.jsx)("p",{children:e.message}),i&&Object(r.jsxs)("div",{children:[Object(r.jsx)("hr",{}),Object(r.jsx)("p",{children:e.details}),Object(r.jsx)("a",{className:"error-toggle-details",onClick:function(){return o(!1)},children:"Show less details"})]}),!i&&Object(r.jsx)("a",{className:"error-toggle-details",onClick:function(){return o(!0)},children:"Show more details"})]})},le=function(e){Object(o.useRouter)();var t=a.a.useRef(null);t&&t.current||window.scrollTo(0,e.scrollY||0);var n=a.a.useState(1),i=Object(s.a)(n,2),c=i[0],u=i[1],l=a.a.useState(e.items||[]),d=Object(s.a)(l,2),f=d[0],m=d[1],h=a.a.useState(!1),v=Object(s.a)(h,2),b=v[0],E=v[1],j=a.a.useState(!1),O=Object(s.a)(j,2),g=O[0],y=O[1],w=a.a.useState(),N=Object(s.a)(w,2),S=N[0],C=N[1];function k(e){if(t.current&&t.current.firstElementChild){t.current.getClientRects()[0].bottom-(t.current.firstElementChild.clientHeight+100)<=window.innerHeight&&E(!0)}}return a.a.useEffect((function(){b&&!g&&fetch("/kurzgesagt-tldr/feed/page".concat(c+1,".json")).then((function(e){if(404!=e.status)return e.json();y(!0)})).then((function(e){e&&(u(c+1),m(f.concat(e)),E(!1))})).catch((function(e){console.error("video feed fetch error",e),y(!0),C(e)}))}),[b]),a.a.useEffect((function(){return window.addEventListener("scroll",k),function(){return window.removeEventListener("scroll",k)}}),[]),Object(r.jsxs)("div",{ref:t,className:"video-feed",children:[f.map((function(t){var n=t.thumbnails.maxresUrl||t.thumbnails.standardUrl||t.thumbnails.highUrl||t.thumbnails.mediumUrl||t.thumbnails.defaultUrl;return Object(r.jsx)("div",{className:"video-feed-card-container",children:Object(r.jsx)(x,{id:t.id,title:t.title,numViews:t.numViews,publishedAt:t.publishedAt,thumbnail:n,duration:t.duration,onClick:function(){return e.onVideoClick&&e.onVideoClick(t.id)}})},t.id)})),b&&!g&&Object(r.jsx)("div",{className:"video-feed-spinner",children:Object(r.jsx)(p,{animation:"border",role:"status",children:Object(r.jsx)("span",{className:"sr-only",children:"Loading..."})})}),S&&Object(r.jsx)(ue,{className:"video-feed-error",title:"Error when loading feed",message:S.message})]})},de=!0;t.default=function(e){var t=Object(o.useRouter)();return Object(r.jsx)("div",{className:"content-container",children:Object(r.jsxs)("div",{className:"content",children:[e.children,Object(r.jsx)(le,{items:e.items,onVideoClick:function(e){t.push("/video/".concat(e))}})]})})}},vlRD:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n("RXBc")}])}},[["vlRD",0,2,3,1,4]]]);